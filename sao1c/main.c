/*
 * sao1c.c
 *
 * Created: 30.06.2024 14:11:36
 * Author : luni
 */ 

#define F_CPU 8000000L
#include <avr/io.h>
#include <util/delay.h>
#include <avr/interrupt.h>
#include "writeRGB8.h"

#define lineWidth  45

//nyan cat
const uint8_t text[] = {
	0x00,0x00,0x00,0x00,0x00,  0x38, 0x00, 0x00, 0x00, 0x00,  0x38, 0x00,  0x80, 0x00, 0x00, 0x00,  0x07, 0x00, 0x00, 0x00,  0x00, 0x00, 0x00, 0x00, 0x00,  0x00, 0x00, 0x00, 0x00, 0x00,  0x38, 0x00,    0x00, 0x00, 0x00, 0x08, 0x08, 0x08, 0x00, 0x00, 0x00, 0x00, 0x08, 0x08, 0x00, 
	0x09,0x48,0x48,0x00,0x00,  0x39, 0x00, 0x00, 0x00, 0x00,  0x00, 0x00,  0xd8, 0xd0, 0xc0, 0x00,  0x45, 0x00, 0x00, 0x00,  0x00, 0x00, 0x00, 0x00, 0x00,  0x00, 0x00, 0x00, 0x00, 0x00,  0x00, 0x00,    0x00, 0x00, 0x08, 0x09, 0x09, 0x09, 0x08, 0x00, 0x00, 0x08, 0x09, 0x09, 0x08, 
	0x48,0x48,0x49,0x49,0x00,  0x3a, 0x3b, 0x3c, 0x09, 0x00,  0x70, 0x00,  0xe0, 0x00, 0x00, 0x00,  0x83, 0x00, 0x00, 0x00,  0x41, 0x00, 0x00, 0xc8, 0x00,  0x09, 0x23, 0x2a, 0x08, 0x00,  0xb8, 0x00,    0x08, 0x08, 0x09, 0x80, 0x80, 0x80, 0x09, 0x08, 0x08, 0x09, 0x80, 0x80, 0x09,
	0x09,0x48,0x49,0x49,0x00,  0x3b, 0x00, 0x00, 0x3d, 0x00,  0xa0, 0x00,  0xa8, 0x08, 0x00, 0x00,  0x82, 0x41, 0x00, 0x00,  0x42, 0x00, 0x00, 0xc5, 0x00,  0x14, 0x00, 0x00, 0x31, 0x00,  0xd8, 0x00,    0x09, 0x09, 0x80, 0x00, 0x00, 0x00, 0x80, 0x09, 0x09, 0x80, 0x00, 0x00, 0x80,
	0x49,0x00,0x49,0x00,0x00,  0x09, 0x3c, 0x3d, 0x09, 0x00,  0xc0, 0x00,  0x00, 0x70, 0x38, 0x00,  0x00, 0xc1, 0xc0, 0x00,  0x01, 0x83, 0x84, 0x40, 0x00,  0x07, 0x00, 0x00, 0x38, 0x00,  0xf8, 0x00,    0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00,
	0,0,0};
/*
const uint8_t text[] = {
	0x00,0x00,0x00,0x00,0x00,  0x38, 0x00, 0x00, 0x00, 0x00,  0x38, 0x00,  0x80, 0x00, 0x00, 0x00,  0x07, 0x00, 0x00, 0x00,  0x00, 0x00, 0x00, 0x00, 0x00,  0x00, 0x00, 0x00, 0x00, 0x00,  0x38, 0x00,    0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10,
	0x00,0x00,0x08,0x00,0x00,  0x39, 0x00, 0x00, 0x00, 0x00,  0x00, 0x00,  0xd8, 0xd0, 0xc0, 0x00,  0x45, 0x00, 0x00, 0x00,  0x00, 0x00, 0x00, 0x00, 0x00,  0x00, 0x00, 0x00, 0x00, 0x00,  0x00, 0x00,    0x00, 0x00, 0x00, 0x01, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00,
	0x00,0x40,0x00,0x01,0x00,  0x3a, 0x3b, 0x3c, 0x09, 0x00,  0x70, 0x00,  0xe0, 0x00, 0x00, 0x00,  0x83, 0x00, 0x00, 0x00,  0x41, 0x00, 0x00, 0xc8, 0x00,  0x09, 0x23, 0x2a, 0x08, 0x00,  0xb8, 0x00,    0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00,
	0x00,0x00,0x09,0x00,0x00,  0x3b, 0x00, 0x00, 0x3d, 0x00,  0xa0, 0x00,  0xa8, 0x08, 0x00, 0x00,  0x82, 0x41, 0x00, 0x00,  0x42, 0x00, 0x00, 0xc5, 0x00,  0x14, 0x00, 0x00, 0x31, 0x00,  0xd8, 0x00,    0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x10, 0x00, 0x00, 0x00,
	0x00,0x00,0x00,0x00,0x00,  0x09, 0x3c, 0x3d, 0x09, 0x00,  0xc0, 0x00,  0x00, 0x70, 0x38, 0x00,  0x00, 0xc1, 0xc0, 0x00,  0x01, 0x83, 0x84, 0x40, 0x00,  0x07, 0x00, 0x00, 0x38, 0x00,  0xf8, 0x00,    0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00,
0,0,0};*/

//uint8_t frame[25];

/*const uint8_t map[25] = {
	24,23,22,21,20,
	15,16,17,18,19,
	14,13,12,11,10,
	 5, 6, 7, 8, 9,
	 4, 3, 2, 1, 0};*/

int main(void)
{
	//8MHz
	CCP    = 0xD8;
	CLKMSR = 0x00;
	CCP    = 0xD8;
	CLKPSR = 0X00;
	//LEDs output
	DDRB  = (1 << DDB2);
	PUEB  = ~(1<<PUEB2);
	PORTB = (1<<PORTB2);
		
    /* Replace with your application code */
    uint8_t i = 0;
	while (1) 
    {		
		uint8_t *p = (uint8_t*)0x40;//frame;
		uint8_t *t = (uint8_t*)&(text[4 * lineWidth + i + 4]);
		*(p++) = *(t--);
		*(p++) = *(t--);
		*(p++) = *(t--);
		*(p++) = *(t--);
		*(p++) = *t;
		t -= lineWidth;
		*(p++) = *(t++);
		*(p++) = *(t++);
		*(p++) = *(t++);
		*(p++) = *(t++);
		*(p++) = *t;
		t -= lineWidth;
		*(p++) = *(t--);
		*(p++) = *(t--);
		*(p++) = *(t--);
		*(p++) = *(t--);
		*(p++) = *t;
		t -= lineWidth;
		*(p++) = *(t++);
		*(p++) = *(t++);
		*(p++) = *(t++);
		*(p++) = *(t++);
		*(p++) = *t;
		t -= lineWidth;
		*(p++) = *(t--);
		*(p++) = *(t--);
		*(p++) = *(t--);
		*(p++) = *(t--);
	    *(p++) = *t;
		writeGRB8mid((uint8_t*)0x40);
		_delay_ms(100);
		i = i + 1;
		if(i == lineWidth + 1)
			i = 0;
    }
}
